Locale={};Locale.texts={};Locale.availableLocales=["en","bg"];Locale.locale="bg";Locale.lang={};Locale.currentLocale={};Locale.init=function(locale,lang){Locale.locale=locale;Locale.lang[locale]=lang;Locale.currentLocale=lang};Locale.get=function(key){if(Locale.texts.hasOwnProperty(key)){return Locale.texts[key]}else{return key}};Locale.change=function(locale){if(locale===Locale.locale){return}if(typeof Locale.lang[locale]!=="undefined"){Locale.init(locale,Locale.lang[locale]);Locale.iterate()}else{Game.loader.add("locale1","locale/"+locale+".json?nocache="+(new Date).getTime());Game.loader.load(function(e){Locale.init(locale,e.resources.locale1.data);Locale.iterate()})}};Locale.iterate=function(){for(var key in Locale.texts){var _keys=key.split(".");if(Locale.texts[key]instanceof Array){for(var i=0;i<Locale.texts[key].length;i++){Locale.texts[key][i].text=Locale.searchKey(Locale.currentLocale,_keys,0)}}else{Locale.texts[key].text=Locale.searchKey(Locale.currentLocale,_keys,0)}}renderer.render(Options.stage)};Locale.build=function(keys,style){var _keys=keys.split(".");var str=Locale.searchKey(Locale.currentLocale,_keys,0);if(arguments.length>2){var args=[str].concat(Array.prototype.splice.call(arguments,2));str=format.apply(null,args)}var text=new PIXI.Text(str,style);if(typeof Locale.texts[keys]!=="undefined"){if(Locale.texts[keys]instanceof Array){Locale.texts[keys].push(text)}else{var first=Locale.texts[keys];Locale.texts[keys]=[first,text]}}else{Locale.texts[keys]=text}return text};Locale.searchKey=function(item,keys,index){if(item.hasOwnProperty(keys[index])){if(typeof item[keys[index]]==="object"){return Locale.searchKey(item[keys[index]],keys,index+1)}else{return item[keys[index]]}}else{console.log(item,keys[index]);return(keys[index].charAt(0).toUpperCase()+keys[index].slice(1)).replace("_"," ")||null}};var format=Locale.format=function(){var args=Array.prototype.splice.call(arguments,1);return arguments[0].replace(/{(\d+)}/g,function(match,number){return typeof args[number]!=="undefined"?args[number]:match})};var Tutorial={};Tutorial.setup={};Tutorial.stage=new PIXI.Container;Tutorial.state={drag:false,y:0,height:0};Tutorial.page=new PIXI.Graphics;Tutorial.init=function(){Tutorial.mouse=renderer.plugins.interaction;if(Tutorial.stage.children.length>0){renderer.render(Tutorial.stage);return}Tutorial.page.interactive=true;Tutorial.state.offset=Game.setup.offset/2;var width=renderer.view.width-Game.setup.offset;var style={align:"left",fill:16514043,wordWrap:true,wordWrapWidth:width,font:"18px Arial"};Tutorial.page.position.set(Game.setup.offset/2,Game.setup.offset/2);var title=Locale.build("tutorial.title",{font:"26px Arial",fill:16514043,align:"center"});var description=Locale.build("tutorial.text",style);description.position.set(0,title.height+30);Tutorial.page.addChild(title);Tutorial.page.addChild(description);Tutorial.page.drawRect(0,0,width,title.height+description.height+Game.setup.offset);Tutorial.stage.addChild(Tutorial.page);Tutorial.stage.addChild(Menu.homeButton());Tutorial.stage.scale.set(Game.ratio);renderer.render(Tutorial.stage)};Tutorial.page.mousedown=Tutorial.page.touchstart=function(){var pos=Tutorial.mouse.eventData.data.global;Tutorial.state.drag=true;Tutorial.state.y=pos.y};Tutorial.page.mousemove=Tutorial.page.touchmove=function(){var h=Tutorial.page.height;var dh=h-CANVAS_HEIGHT+Game.setup.offset;if(Tutorial.state.drag&&h>CANVAS_HEIGHT){var pos=Tutorial.mouse.eventData.data.global;Tutorial.page.y+=pos.y-Tutorial.state.y;if(Tutorial.page.y<-dh){Tutorial.page.y=-dh}if(Tutorial.page.y>Tutorial.state.offset){Tutorial.page.y=Tutorial.state.offset}Tutorial.state.y=pos.y;renderer.render(Tutorial.stage)}};Tutorial.page.mouseup=Tutorial.page.touchend=function(){Tutorial.state.drag=false};var Options={};Options.setup={};Options.stage=new PIXI.Container;Options.flags={};Options.init=function(){if(Options.stage.children.length>0){renderer.render(Options.stage);return}var style={font:"26px Arial",fill:13421772};var lSelect=new PIXI.Container;var page=new PIXI.Graphics;var title=Locale.build("options.title",style);var localeSelect=Locale.build("options.locale",style);lSelect.position.set(30,50);localeSelect.position.set(0,0);title.position.set(30,0);lSelect.addChild(localeSelect);page.position.set(Game.setup.padding,Game.setup.padding);page.width=renderer.view.width-Game.setup.offset;Game.loader.add("sprite","img/flags.png");Game.loader.load(function(e){var bt=new PIXI.BaseTexture.fromImage(e.resources.sprite.url,false);var rects=new Array;for(var k=0;k<Locale.availableLocales.length;k++){var key=Locale.availableLocales[k];var rect=key==="en"?new PIXI.Rectangle(0,32,32,32):new PIXI.Rectangle(32,0,32,32);var pos=key==="en"?{x:30,y:30}:{x:80,y:30};Options.flags[key]=new PIXI.Texture(bt,rect);var flag=new PIXI.Sprite(Options.flags[key]);flag.position.set(pos.x,pos.y);flag.interactive=true;flag.buttonMode=true;flag.id=key;flag.mouseup=flag.touchend=function(){Locale.change(this.id)};lSelect.addChild(flag)}renderer.render(Options.stage)});page.addChild(title);page.addChild(Menu.homeButton());Options.stage.addChild(lSelect);Options.stage.addChild(page);Options.stage.scale.set(Game.ratio);renderer.render(Options.stage)};var Menu={};Menu.init=function(){var text=null,option={},options=[],_buttons=[{text:"menu.start",action:Game.start},{text:"menu.tutorial",action:Tutorial.init},{text:"menu.options",action:Options.init}];Menu.stage.interactive=true;for(var i in _buttons){option=options[i]=new PIXI.Graphics;option.interactive=true;option.buttonMode=true;text=Locale.build(_buttons[i].text,{font:"28px Arial",align:"center"});text.anchor.set(.5,.5);text.x=298;text.y=20;option.lineStyle(2,16724736,1);option.beginFill(6737151);option.drawRect(200,0,196,40);option.hitArea=new PIXI.Rectangle(200,0,196,40);option.endFill();option.x=0;option.y+=i*64;option.addChild(text);option.click=option.touchend=_buttons[i].action;Menu.stage.addChild(option)}if(Game.isMobile){Menu.stage.x=(CANVAS_WIDTH/2-200)/Game.ratio;Menu.stage.y=350/Game.ratio;Menu.stage.scale.set(Game.ratio)}else{Menu.stage.x=CANVAS_WIDTH/6;Menu.stage.y=100}renderer.render(Menu.stage)};Menu.homeButton=function(rect){var props=["x","y","w","h"];var button=new PIXI.Graphics;var text=Locale.build("home_button.back",{font:"20px Arial",fill:2236689,align:"center"});text.anchor.set(.5,.5);button.lineStyle(3,16737809,1);button.beginFill(12303291);if(typeof rect!=="undefined"){for(var i in props){if(!rect.hasOwnProperty(i)){rect[i]=0}}button.drawRoundedRect(rect.x,rect.y,rect.w,rect.h,5);text.position.set(rect.w/2,rect.h/2)}else{button.drawRoundedRect(CANVAS_WIDTH/Game.ratio-300,5,200,30,5);text.position.set(CANVAS_WIDTH/Game.ratio-200,20)}button.endFill();button.interactive=true;button.buttonMode=true;button.click=button.tap=function(e){renderer.render(Menu.stage)};button.addChild(text);return button};Menu.stage=new PIXI.Container;var Game={};var CANVAS_WIDTH=960,CANVAS_HEIGHT=600;Game.locale="bg";Game.isMobile=false;Game.landscape=true;Game.ratio=1;Game.landscapeView={};Game.setup={worldWidth:800,worldHeight:600,count:30,padding:15,offset:60,rows:10,columns:10,fps:32,depth:5,visible_nodes:2,resets:5,leftHand:true,analog:{x:740,y:540,R:50,r:25}};var a=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))){Game.isMobile=true}if(Game.isMobile){Game.ratio=window.devicePixelRatio||1;CANVAS_WIDTH=document.documentElement.clientWidth*Game.ratio;CANVAS_HEIGHT=document.documentElement.clientHeight*Game.ratio;window.addEventListener("resize",function(e){Game.landscape=Game.landscape?false:true;var width=e.target.innerWidth;var height=e.target.innerHeight;if(height>width){Game.notification(width,height)}else{Menu.init()}})}var renderer=PIXI.autoDetectRenderer(CANVAS_WIDTH,CANVAS_HEIGHT,{resolution:1/Game.ratio,antialias:true,transparent:false,backgroundColor:1122850});renderer.clearBeforeRender=true;Game.init=function(){renderer.view.oncontextmenu=function(){return false};document.getElementById("canvas_wrap").appendChild(renderer.view);Game.loader.add("locale","locale/"+Game.locale+".json?nocache="+(new Date).getTime());Game.loader.load(function(e){Locale.init(Game.locale,e.resources.locale.data);Menu.init();if(Game.isMobile){Game.resize(Game.ratio)}Game.setup.worldWidth=CANVAS_WIDTH-Game.setup.analog.R*4;Game.setup.worldHeight=CANVAS_HEIGHT;if(window.innerHeight>window.innerWidth){Game.notification(window.innerWidth,window.innerHeight)}})};Game.loader=PIXI.loader;Game.nodes=[];Game.sectors=[];Game.scene={};Game.start=function(){if(Game.scene instanceof PIXI.Container&&Game.scene.children.length>0){renderer.render(Game.scene);return}Game.scene=new PIXI.Container;Game.world=new PIXI.Container;Game.scene.interactive=true;Game.section_width=Game.setup.worldWidth/Game.setup.rows;Game.section_height=Game.setup.worldHeight/Game.setup.columns;for(var i=0;i<=Game.setup.rows;i++){Game.sectors[i]=[];for(var j=0;j<=Game.setup.columns;j++){Game.sectors[i][j]=new Sector(i,j)}}var fontSize=Game.setup.padding*1.25;var sWidth=Game.setup.worldWidth/Game.setup.columns;var sHeight=Game.setup.worldHeight/Game.setup.rows;for(var i=1;i<=Game.setup.count;i++){Game.nodes[i]=new PIXI.Graphics;Game.world.addChild(Game.nodes[i]);Game.nodes[i]._id=i;Game.nodes[i].radius=Game.setup.padding;var position=setNodePosition(i,Game.setup.offset),sx=~~(position.x/sWidth),sy=~~(position.y/sHeight);var count=0;for(var cx=-1;cx<=1;cx++){for(var cy=-1;cy<=1;cy++){if(typeof Game.sectors[sx+cx]!=="undefined"&&typeof Game.sectors[sx+cx][sy+cy]!=="undefined"&&IsNodeInSection(Game.nodes[i],Game.sectors[sx+cx][sy+cy])){Game.sectors[sx+cx][sy+cy].addNode(Game.nodes[i]);count++;if(count===4)break}}}Game.nodes[i].lineStyle(1,16724736,1);Game.nodes[i].beginFill(6737151);Game.nodes[i].drawCircle(position.x,position.y,Game.setup.padding);Game.nodes[i].endFill();var text=new PIXI.Text(i,{font:fontSize+"px Arial"});text.anchor.set(.5,.5);text.position.x=position.x;text.position.y=position.y;if(Game.setup.visible_nodes<i){text.visible=false}Game.nodes[i].addChild(text)}Hud.init();Game.scene.addChild(Game.world);Game.scene.addChild(Hud);renderer.render(Game.scene)};Game.restart=function(){location.reload()};Game.end=function(msg){var msg=msg||"You WIN!!!";var screen=new PIXI.Container;Game.scene.interactive=false;screen.x=0;screen.y=0;screen.width=CANVAS_WIDTH;screen.height=CANVAS_HEIGHT;Hud.analog.disable();var bg=new PIXI.Graphics;bg.interactive=true;bg.width=300;bg.height=200;bg.beginFill(17561,.5);bg.drawRect(0,0,renderer.width,renderer.height);bg.endFill();var fontSize=bg.width/12.5;var message=Locale.build("messages.game_over_score",{font:fontSize+"px Arial",fill:5296208,align:"center",wordWrapWidth:renderer.width-100,wordWrap:true},Player.game.score);message.anchor.set(.5,.5);message.position.set(renderer.width/2,renderer.height/2);bg.addChild(message);bg.mouseclick=bg.tap=function(){location.reload()};screen.addChild(bg);screen.scale.set(Game.ratio);Game.scene.addChild(screen);renderer.render(Game.scene)};Game.notification=function(w,h){Game.landscapeView=new PIXI.Graphics;Game.landscapeView.beginFill(1118481);Game.landscapeView.drawRect(0,0,w,h);Game.landscapeView.endFill();var text=Locale.build("messages.switch_to_landscape",{font:40*Game.ratio+"px Arial",fill:15658734,wordWrapWidth:w-100*Game.ratio,wordWrap:true});text.anchor.set(.5,.5);text.position.set(w/2,h/2);Game.landscapeView.addChild(text);Game.landscapeView.scale.set(Game.ratio);renderer.render(Game.landscapeView)};Game.resize=function(ratio){if(ratio===1)return;var propsToResize=["padding","offset","fps","analog.R","analog.r","analog.x","analog.y"];for(var i=0;i<propsToResize.length;i++){if(propsToResize[i].indexOf(".")!==-1){props=propsToResize[i].split(".");Game.setup[props[0]][props[1]]=Math.floor(Game.setup[props[0]][props[1]]*ratio)}else{Game.setup[propsToResize[i]]=Math.floor(Game.setup[propsToResize[i]]*ratio)}}};var random=function(min,max){return~~(Math.random()*(max-min+1)+min)};function log(){for(var i=0;i<arguments.length;i++)console.log(arguments[i])}function IsNodeInSection(circle,rect){var distX=Math.abs(circle._x-rect.x-rect.width()/2);var distY=Math.abs(circle._y-rect.y-rect.height()/2);if(distX>rect.width()/2+circle.radius){return false}if(distY>rect.height()/2+circle.radius){return false}if(distX<=rect.width()/2){return true}if(distY<=rect.height()/2){return true}var dx=distX-rect.width()/2;var dy=distY-rect.height()/2;return dx*dx+dy*dy<=circle.radius*circle.radius}function setNodePosition(n,padding){var x,y,randomChoice,prevNode=Game.nodes[n-1],maxWidth=Game.setup.worldWidth/2-padding,maxHeight=Game.setup.worldHeight/2-padding;if(n>1){var randomChoice=random(0,2);x=Game.nodes[n]._x=randomChoice>0?prevNode._x>maxWidth?random(padding+Game.setup.offset,prevNode._x-maxWidth+padding):random(prevNode._x+maxWidth,Game.setup.worldWidth-padding-Game.setup.offset):random(padding,Game.setup.worldWidth-padding);y=Game.nodes[n]._y=randomChoice<2?prevNode._y>maxHeight?random(padding+Game.setup.offset,prevNode._y-maxHeight+padding):random(prevNode._y+maxHeight,Game.setup.worldHeight-padding-Game.setup.offset):random(padding,Game.setup.worldHeight-padding)}else{x=Game.nodes[n]._x=random(padding,Game.setup.worldWidth-padding);y=Game.nodes[n]._y=random(padding,Game.setup.worldHeight-padding)}for(var i=1;i<Game.nodes.length-1;i++){if(x>=Game.nodes[i]._x-padding&&x<=Game.nodes[i]._x+padding&&y>=Game.nodes[i]._y-padding&&y<=Game.nodes[i]._y+padding){return setNodePosition(n,padding)}}return{x:x,y:y}}var pointToPointDistance=function(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))};var round=function(n,count){var num=10*(count?count:2);return Math.round(n*num)/num};function intersectionBetween(line,route){var denominator,a,b,numerator1,numerator2,point={};a=line.ay-route.ay;b=line.ax-route.ax;denominator=(route.by-route.ay)*(line.bx-line.ax)-(route.bx-route.ax)*(line.by-line.ay);if(denominator===0){return{x:line.ax,y:line.ay}}numerator1=(route.bx-route.ax)*a-(route.by-route.ay)*b;numerator2=(line.bx-line.ax)*a-(line.by-line.ay)*b;a=numerator1/denominator;b=numerator2/denominator;if(a>0&&a<1&&b>0&&b<1){point.x=line.ax+a*(line.bx-line.ax);point.y=line.ay+a*(line.by-line.ay);return point}return false}function checkLineIntersection(lineA,lineB){if(!lineB.hasOwnProperty("ax"))return{onLine1:false,onLine2:false};var denominator,a,b,numerator1,numerator2,result={x:null,y:null,onLine1:false,onLine2:false};denominator=(lineB.by-lineB.ay)*(lineA.bx-lineA.ax)-(lineB.bx-lineB.ax)*(lineA.by-lineA.ay);if(denominator===0){return result}a=lineA.ay-lineB.ay;b=lineA.ax-lineB.ax;numerator1=(lineB.bx-lineB.ax)*a-(lineB.by-lineB.ay)*b;numerator2=(lineA.bx-lineA.ax)*a-(lineA.by-lineA.ay)*b;a=numerator1/denominator;b=numerator2/denominator;result.x=lineA.ax+a*(lineA.bx-lineA.ax);result.y=lineA.ay+a*(lineA.by-lineA.ay);if(a>0&&a<1){result.onLine1=true}if(b>0&&b<1){result.onLine2=true}return result}function pointInTriangle(p,p0,p1,p2){var A=1/2*(-p1.y*p2.x+p0.y*(-p1.x+p2.x)+p0.x*(p1.y-p2.y)+p1.x*p2.y);var sign=A<0?-1:1;var s=(p0.y*p2.x-p0.x*p2.y+(p2.y-p0.y)*p.x+(p0.x-p2.x)*p.y)*sign;var t=(p0.x*p1.y-p0.y*p1.x+(p0.y-p1.y)*p.x+(p1.x-p0.x)*p.y)*sign;return s>0&&t>0&&s+t<2*A*sign}if(!String.prototype.format){String.prototype.format=function(){var args=arguments;return this.replace(/{(\d+)}/g,function(match,number){return typeof args[number]!=="undefined"?args[number]:match})}}(function(global){"use strict";var DP=20,RM=1,MAX_DP=1e6,MAX_POWER=1e6,E_NEG=-7,E_POS=21,P={},isValid=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Big;function bigFactory(){function Big(n){var x=this;if(!(x instanceof Big)){return n===void 0?bigFactory():new Big(n)}if(n instanceof Big){x.s=n.s;x.e=n.e;x.c=n.c.slice()}else{parse(x,n)}x.constructor=Big}Big.prototype=P;Big.DP=DP;Big.RM=RM;Big.E_NEG=E_NEG;Big.E_POS=E_POS;return Big}function format(x,dp,toE){var Big=x.constructor,i=dp-(x=new Big(x)).e,c=x.c;if(c.length>++dp){rnd(x,i,Big.RM)}if(!c[0]){++i}else if(toE){i=dp}else{c=x.c;i=x.e+i+1}for(;c.length<i;c.push(0)){}i=x.e;return toE===1||toE&&(dp<=i||i<=Big.E_NEG)?(x.s<0&&c[0]?"-":"")+(c.length>1?c[0]+"."+c.join("").slice(1):c[0])+(i<0?"e":"e+")+i:x.toString()}function parse(x,n){var e,i,nL;if(n===0&&1/n<0){n="-0"}else if(!isValid.test(n+="")){throwErr(NaN)}x.s=n.charAt(0)=="-"?(n=n.slice(1),-1):1;if((e=n.indexOf("."))>-1){n=n.replace(".","")}if((i=n.search(/e/i))>0){if(e<0){e=i}e+=+n.slice(i+1);n=n.substring(0,i)}else if(e<0){e=n.length}for(i=0;n.charAt(i)=="0";i++){}if(i==(nL=n.length)){x.c=[x.e=0]}else{for(;n.charAt(--nL)=="0";){}x.e=e-i-1;x.c=[];for(e=0;i<=nL;x.c[e++]=+n.charAt(i++)){}}return x}function rnd(x,dp,rm,more){var u,xc=x.c,i=x.e+dp+1;if(rm===1){more=xc[i]>=5}else if(rm===2){more=xc[i]>5||xc[i]==5&&(more||i<0||xc[i+1]!==u||xc[i-1]&1)}else if(rm===3){more=more||xc[i]!==u||i<0}else{more=false;if(rm!==0){throwErr("!Big.RM!")}}if(i<1||!xc[0]){if(more){x.e=-dp;x.c=[1]}else{x.c=[x.e=0]}}else{xc.length=i--;if(more){for(;++xc[i]>9;){xc[i]=0;if(!i--){++x.e;xc.unshift(1)}}}for(i=xc.length;!xc[--i];xc.pop()){}}return x}function throwErr(message){var err=new Error(message);err.name="BigError";throw err}P.abs=function(){var x=new this.constructor(this);x.s=1;return x};P.cmp=function(y){var xNeg,x=this,xc=x.c,yc=(y=new x.constructor(y)).c,i=x.s,j=y.s,k=x.e,l=y.e;if(!xc[0]||!yc[0]){return!xc[0]?!yc[0]?0:-j:i}if(i!=j){return i}xNeg=i<0;if(k!=l){return k>l^xNeg?1:-1}i=-1;j=(k=xc.length)<(l=yc.length)?k:l;for(;++i<j;){if(xc[i]!=yc[i]){return xc[i]>yc[i]^xNeg?1:-1}}return k==l?0:k>l^xNeg?1:-1};P.div=function(y){var x=this,Big=x.constructor,dvd=x.c,dvs=(y=new Big(y)).c,s=x.s==y.s?1:-1,dp=Big.DP;if(dp!==~~dp||dp<0||dp>MAX_DP){throwErr("!Big.DP!")}if(!dvd[0]||!dvs[0]){if(dvd[0]==dvs[0]){throwErr(NaN)}if(!dvs[0]){throwErr(s/0)}return new Big(s*0)}var dvsL,dvsT,next,cmp,remI,u,dvsZ=dvs.slice(),dvdI=dvsL=dvs.length,dvdL=dvd.length,rem=dvd.slice(0,dvsL),remL=rem.length,q=y,qc=q.c=[],qi=0,digits=dp+(q.e=x.e-y.e)+1;q.s=s;s=digits<0?0:digits;dvsZ.unshift(0);for(;remL++<dvsL;rem.push(0)){}do{for(next=0;next<10;next++){if(dvsL!=(remL=rem.length)){cmp=dvsL>remL?1:-1}else{for(remI=-1,cmp=0;++remI<dvsL;){if(dvs[remI]!=rem[remI]){cmp=dvs[remI]>rem[remI]?1:-1;break}}}if(cmp<0){for(dvsT=remL==dvsL?dvs:dvsZ;remL;){if(rem[--remL]<dvsT[remL]){remI=remL;for(;remI&&!rem[--remI];rem[remI]=9){}--rem[remI];rem[remL]+=10}rem[remL]-=dvsT[remL]}for(;!rem[0];rem.shift()){}}else{break}}qc[qi++]=cmp?next:++next;if(rem[0]&&cmp){rem[remL]=dvd[dvdI]||0}else{rem=[dvd[dvdI]]}}while((dvdI++<dvdL||rem[0]!==u)&&s--);if(!qc[0]&&qi!=1){qc.shift();q.e--}if(qi>digits){rnd(q,dp,Big.RM,rem[0]!==u)}return q};P.eq=function(y){return!this.cmp(y)};P.gt=function(y){return this.cmp(y)>0};P.gte=function(y){return this.cmp(y)>-1};P.lt=function(y){return this.cmp(y)<0};P.lte=function(y){return this.cmp(y)<1};P.sub=P.minus=function(y){var i,j,t,xLTy,x=this,Big=x.constructor,a=x.s,b=(y=new Big(y)).s;if(a!=b){y.s=-b;return x.plus(y)}var xc=x.c.slice(),xe=x.e,yc=y.c,ye=y.e;if(!xc[0]||!yc[0]){return yc[0]?(y.s=-b,y):new Big(xc[0]?x:0)}if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc}else{ye=xe;t=yc}t.reverse();for(b=a;b--;t.push(0)){}t.reverse()}else{j=((xLTy=xc.length<yc.length)?xc:yc).length;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}}}if(xLTy){t=xc;xc=yc;yc=t;y.s=-y.s}if((b=(j=yc.length)-(i=xc.length))>0){for(;b--;xc[i++]=0){}}for(b=i;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=9){}--xc[i];xc[j]+=10}xc[j]-=yc[j]}for(;xc[--b]===0;xc.pop()){}for(;xc[0]===0;){xc.shift();--ye}if(!xc[0]){y.s=1;xc=[ye=0]}y.c=xc;y.e=ye;return y};P.mod=function(y){var yGTx,x=this,Big=x.constructor,a=x.s,b=(y=new Big(y)).s;if(!y.c[0]){throwErr(NaN)}x.s=y.s=1;yGTx=y.cmp(x)==1;x.s=a;y.s=b;if(yGTx){return new Big(x)}a=Big.DP;b=Big.RM;Big.DP=Big.RM=0;x=x.div(y);Big.DP=a;Big.RM=b;return this.minus(x.times(y))};P.add=P.plus=function(y){var t,x=this,Big=x.constructor,a=x.s,b=(y=new Big(y)).s;if(a!=b){y.s=-b;return x.minus(y)}var xe=x.e,xc=x.c,ye=y.e,yc=y.c;if(!xc[0]||!yc[0]){return yc[0]?y:new Big(xc[0]?x:a*0)}xc=xc.slice();if(a=xe-ye){if(a>0){ye=xe;t=yc}else{a=-a;t=xc}t.reverse();for(;a--;t.push(0)){}t.reverse()}if(xc.length-yc.length<0){t=yc;yc=xc;xc=t}a=yc.length;for(b=0;a;){b=(xc[--a]=xc[a]+yc[a]+b)/10|0;xc[a]%=10}if(b){xc.unshift(b);++ye}for(a=xc.length;xc[--a]===0;xc.pop()){}y.c=xc;y.e=ye;return y};P.pow=function(n){var x=this,one=new x.constructor(1),y=one,isNeg=n<0;if(n!==~~n||n<-MAX_POWER||n>MAX_POWER){throwErr("!pow!")}n=isNeg?-n:n;for(;;){if(n&1){y=y.times(x)}n>>=1;if(!n){break}x=x.times(x)}return isNeg?one.div(y):y};P.round=function(dp,rm){var x=this,Big=x.constructor;if(dp==null){dp=0}else if(dp!==~~dp||dp<0||dp>MAX_DP){throwErr("!round!")}rnd(x=new Big(x),dp,rm==null?Big.RM:rm);return x};P.sqrt=function(){var estimate,r,approx,x=this,Big=x.constructor,xc=x.c,i=x.s,e=x.e,half=new Big("0.5");if(!xc[0]){return new Big(x)}if(i<0){throwErr(NaN)}i=Math.sqrt(x.toString());if(i===0||i===1/0){estimate=xc.join("");if(!(estimate.length+e&1)){estimate+="0"}r=new Big(Math.sqrt(estimate).toString());r.e=((e+1)/2|0)-(e<0||e&1)}else{r=new Big(i.toString())}i=r.e+(Big.DP+=4);do{approx=r;r=half.times(approx.plus(x.div(approx)))}while(approx.c.slice(0,i).join("")!==r.c.slice(0,i).join(""));rnd(r,Big.DP-=4,Big.RM);return r};P.mul=P.times=function(y){var c,x=this,Big=x.constructor,xc=x.c,yc=(y=new Big(y)).c,a=xc.length,b=yc.length,i=x.e,j=y.e;y.s=x.s==y.s?1:-1;if(!xc[0]||!yc[0]){return new Big(y.s*0)}y.e=i+j;if(a<b){c=xc;xc=yc;yc=c;j=a;a=b;b=j}for(c=new Array(j=a+b);j--;c[j]=0){}for(i=b;i--;){b=0;for(j=a+i;j>i;){b=c[j]+yc[i]*xc[j-i-1]+b;c[j--]=b%10;b=b/10|0}c[j]=(c[j]+b)%10}if(b){++y.e}if(!c[0]){c.shift()}for(i=c.length;!c[--i];c.pop()){}y.c=c;return y};P.toString=P.valueOf=P.toJSON=function(){var x=this,Big=x.constructor,e=x.e,str=x.c.join(""),strL=str.length;if(e<=Big.E_NEG||e>=Big.E_POS){str=str.charAt(0)+(strL>1?"."+str.slice(1):"")+(e<0?"e":"e+")+e}else if(e<0){for(;++e;str="0"+str){}str="0."+str}else if(e>0){if(++e>strL){for(e-=strL;e--;str+="0"){}}else if(e<strL){str=str.slice(0,e)+"."+str.slice(e)}}else if(strL>1){str=str.charAt(0)+"."+str.slice(1)}return x.s<0&&x.c[0]?"-"+str:str};P.toExponential=function(dp){if(dp==null){dp=this.c.length-1}else if(dp!==~~dp||dp<0||dp>MAX_DP){throwErr("!toExp!")}return format(this,dp,1)};P.toFixed=function(dp){var str,x=this,Big=x.constructor,neg=Big.E_NEG,pos=Big.E_POS;Big.E_NEG=-(Big.E_POS=1/0);if(dp==null){str=x.toString()}else if(dp===~~dp&&dp>=0&&dp<=MAX_DP){str=format(x,x.e+dp);if(x.s<0&&x.c[0]&&str.indexOf("-")<0){str="-"+str}}Big.E_NEG=neg;Big.E_POS=pos;if(!str){throwErr("!toFix!")}return str};P.toPrecision=function(sd){if(sd==null){return this.toString()}else if(sd!==~~sd||sd<1||sd>MAX_DP){throwErr("!toPre!")}return format(this,sd-1,2)};Big=bigFactory();if(typeof define==="function"&&define.amd){define(function(){return Big})}else if(typeof module!=="undefined"&&module.exports){module.exports=Big}else{global.Big=Big}})(this);var Sector=function(x,y){var width=Game.setup.worldWidth/Game.setup.columns,height=Game.setup.worldHeight/Game.setup.rows,nodes=[],routes=[],segments=[],section=new PIXI.Graphics;this.x=width*x;this.y=height*y;var edges=[{ax:this.x,ay:this.y,bx:this.x+width,by:this.y},{ax:this.x+width,ay:this.y,bx:this.x+width,by:this.y+height},{ax:this.x+width,ay:this.y+height,bx:this.x,by:this.y+height},{ax:this.x,ay:this.y+height,bx:this.x,by:this.y}];this.addNode=function(node){nodes.push(node)};this.getInstance=function(){return section};this.getSegments=function(){return segments};this.getNodes=function(){return nodes};this.width=function(){return width};this.height=function(){return height};this.addSegment=function(line){segments.push(line)};this.clearSegments=function(index){for(var i=segments.length-1;i>=0;i--){if(segments[i].n===index){segments.splice(i,1)}}};this.intersectionWith=function(line){for(var i=0;i<edges.length;i++){var intersection=intersectionBetween(line,edges[i]);if(intersection.hasOwnProperty("x")){return intersection}}return false};return this};var Pointer=function(options){var drag=false,route,tri,turn=false,newTurn=true,THIKCNESS=3*Game.ratio,sx,sy,_sx,_sy,setup=Game.setup,analog=setup.analog,_color=16750916,fps=setup.fps,_route=new PIXI.Container,number,next_node,section,segments,lastTurnPoint={},hittableObject={},stats={},x,y,_x,_y,min_x,min_y,max_x,max_y;this.init=function(){number=1;startNewRoute();next_node=number+1;Game.loader.add("pointer","img/pointer.png");Game.loader.load(function(sprites,resources){var texture=new PIXI.Texture.fromImage(resources.pointer.url);tri=new PIXI.Sprite(texture);tri.anchor.x=.5;tri.anchor.y=1;tri.scale.set(Game.ratio);draw();_sx=sx=~~(x/(setup.worldWidth/setup.columns));_sy=sy=~~(y/(setup.worldHeight/setup.rows));section=Game.sectors[sx][sy];section.addSegment({ax:x,ay:y,bx:x,by:y,n:number});segments=section.getSegments();_route.addChild(route);Game.world.addChild(_route);Game.world.addChild(tri);renderer.render(Game.scene)})};var draw=function(){x=tri.dx=tri._x=Game.nodes[number]._x;y=tri.dy=tri._y=Game.nodes[number]._y;min_x=-tri._x;min_y=-tri._y;max_x=setup.worldWidth-tri._x;max_y=setup.worldHeight-tri._y;tri.ax=tri.ay=1;tri.x=x;tri.y=y};this.start=function(a,b){this.setDirection(a,b);drag=true;move()};this.stop=function(){drag=false};var move=function(){if(!drag){renderer.render(Game.scene);return}route.moveTo(tri.dx,tri.dy);tri.dx=tri.x+x;tri.dy=tri.y+y;if(tri.dx<0||tri.dx>setup.worldWidth||tri.dy<0||tri.dy>setup.worldHeight){interrupt();return}var nx=tri.dx-Game.nodes[number]._x;var ny=tri.dy-Game.nodes[number]._y;var rd=Game.nodes[number].radius;var length=nx*nx+ny*ny;if(newTurn&&rd*rd<=length){newTurn=false}sx=~~(tri.dx/(setup.worldWidth/setup.columns));sy=~~(tri.dy/(setup.worldHeight/setup.rows));var segment={ax:tri.x,ay:tri.y,bx:tri.dx,by:tri.dy,n:number};var offset=0;if(_sx!==sx||_sy!==sy||turn){if(turn&&(_sx===sx&&_sy===sy)){section.addSegment({ax:lastTurnPoint.x,ay:lastTurnPoint.y,bx:tri.dx,by:tri.dy,n:number});lastTurnPoint.x=tri.dx;lastTurnPoint.y=tri.dy;offset=1}else if(_sx!==sx||_sy!==sy){var point=section.intersectionWith(segment);section.addSegment({ax:lastTurnPoint.x,ay:lastTurnPoint.y,bx:point.x,by:point.y,n:number});lastTurnPoint=point;section=Game.sectors[sx][sy];var segment={ax:point.x,ay:point.y,bx:tri.dx,by:tri.dy,n:number};section.addSegment(segment)}segments=section.getSegments();var collisionDistance=~~(renderer.height/setup.columns);for(var i=0;i<segments.length-offset;i++){var intersection=checkLineIntersection(segment,segments[i]);if(intersection.onLine1&&intersection.onLine2){interrupt();return}else if(intersection.onLine2){var newDistance=pointToPointDistance(tri,{x:intersection.x,y:intersection.y});if(newDistance<collisionDistance&&pointInTriangle({x:tri.dx,y:tri.dy},{x:tri.x,y:tri.y},{x:segments[i].ax,y:segments[i].ay},{x:segments[i].bx,y:segments[i].by})){collisionDistance=newDistance;hittableObject=segments[i]}}}}else{var collision=checkLineIntersection(segment,hittableObject);if(collision.onLine1&&collision.onLine2){collisionDistance=~~(renderer.height/setup.columns);interrupt();return}}var nodes=section.getNodes();for(var k=0;k<nodes.length;k++){var ax=tri.dx-nodes[k]._x;var ay=tri.dy-nodes[k]._y;var R=nodes[k].radius*nodes[k].radius;var dist=ax*ax+ay*ay;if(nodes[k]._id===next_node&&dist<R){if(number+setup.visible_nodes<=setup.count){Game.nodes[number+setup.visible_nodes].children[0].visible=true}if(number>setup.visible_nodes){Game.nodes[number-setup.visible_nodes].children[0].visible=false}Player.game.streak++;Player.increaseScore();number++;if(number>=setup.count){console.log(number);Game.end("You WIN!!!")}drag=false;draw();x=tri.dx=nodes[k]._x;y=tri.dy=nodes[k]._y;_sx=~~(x/(setup.worldWidth/setup.columns));_sy=~~(y/(setup.worldHeight/setup.rows));next_node++;if(number>setup.depth){for(var i=0;i<_route.children[0].sections.length;i++){var route_x=parseInt(_route.children[0].sections[i][0]);var route_y=parseInt(_route.children[0].sections[i][2]);if(typeof Game.sectors[route_x][route_y]!=="undefined"){Game.sectors[route_x][route_y].clearSegments(number-setup.depth)}}}startNewRoute();_route.addChild(route);if(_route.children.length>setup.depth){_route.removeChild(_route.children[0])}return}if(dist<R&&!newTurn){interrupt();return}}if(route.sections.indexOf(sx+"_"+sy)===-1){route.sections.push(sx+"_"+sy)}_sx=sx;_sy=sy;if(!newTurn){route.lineTo(tri.dx,tri.dy)}if(Player.game.stamina<=0){interrupt();return}Player.reduceStamina(length);tri.x=tri.dx;tri.y=tri.dy;renderer.render(Game.scene);requestAnimationFrame(move)};var interrupt=function(){Hud.livesCounter.text=--Player.stats.lives;Player.game.streak=1;if(Player.stats.lives===0){Game.end()}newTurn=true;tri.rotation=0;x=tri.x=tri.dx=Game.nodes[number]._x;y=tri.y=tri.dy=Game.nodes[number]._y;_sx=~~(x/(setup.worldWidth/setup.columns));_sy=~~(y/(setup.worldHeight/setup.rows));_route.removeChild(route);for(var i=0;i<route.sections.length;i++){var route_x=parseInt(route.sections[i][0]);var route_y=parseInt(route.sections[i][2]);if(typeof Game.sectors[route_x][route_y]!=="undefined"){Game.sectors[route_x][route_y].clearSegments(number)}}hittableObject={};startNewRoute();renderer.render(Game.scene);drag=false};var startNewRoute=function(){newTurn=true;Player.restoreStamina();route=new PIXI.Graphics;route.lineStyle(THIKCNESS,_color,1);route.moveTo(Game.nodes[number]._x,Game.nodes[number]._y);route.lineTo(Game.nodes[number]._x,Game.nodes[number]._y);route.sections=new Array;_route.addChild(route);lastTurnPoint={x:Game.nodes[number]._x,y:Game.nodes[number]._y};renderer.view.toDataURL("image/png",1)};this.setDirection=function(a,b){turn=(analog.y-b)/(analog.x-a)!==(analog.y-_y)/(analog.x-_x);_x=a;_y=b;x=a/fps;y=b/fps};return this};var Analog=function(){var a=Hud.width/2,b=Hud.height-Game.setup.analog.R-30,local_x=CANVAS_WIDTH-a;R=Game.setup.analog.R,pointer=Game.pointer,drag=false;this.getCircle=function(){var circle=new PIXI.Graphics;var x=x||a;var y=y||b;circle.lineStyle(3*Game.ratio,16724736,1);circle.beginFill(0,0);circle.drawCircle(a,b,R);circle.endFill();
this.circle=circle;return circle};this.getControler=function(){circle=new PIXI.Graphics;circle.interactive=true;var action=renderer.plugins.interaction;circle.mousedown=circle.touchstart=function(e){drag=true;window.addEventListener("mouseup",function(){if(drag)circle.mouseup()});window.addEventListener("touchend",function(){if(drag)circle.touchend()});var position=Hud.toLocal(action.eventData.data.global,circle);var position=action.eventData.data.global;circle.x=position.x-local_x;circle.y=position.y-b;pointer.start(circle.x,circle.y,round(Math.sqrt(circle.x*circle.x+circle.y*circle.y)));renderer.render(circle.parent)};circle.mouseup=circle.touchend=function(){drag=false;pointer.stop();circle.update()};circle.mousemove=circle.touchmove=function(e){if(!drag)return;var position=action.eventData.data.global,x=position.x-local_x,y=position.y-b,num=new Big(x*x+y*y),dist=num.sqrt();if(dist>R){x=x/dist*R;y=y/dist*R}pointer.setDirection(x,y,dist);circle.x=x;circle.y=y;renderer.render(Game.scene)};circle.update=function(){var dist=Math.sqrt(circle.x*circle.x+circle.y*circle.y);circle.x=circle.x/(R+1)*dist;circle.y=circle.y/(R+1)*dist;renderer.render(Game.scene);if(circle.x===0&&circle.y===0)return;requestAnimationFrame(circle.update)};circle.lineStyle(2*Game.ratio,16724736,1);circle.beginFill(0);circle.drawCircle(a,b,Game.setup.analog.r);circle.endFill();return circle};this.disable=function(){circle.interactive=false};return this};var Player={};Player.stats={lives:10,stamina:500,score:0,remember:5,predict:2,luck:5,safeRadius:10,streak:1};Player.setup={};Player.game={};Player.font={};Player.init=function(options){Player.setup=options;Player.game={lives:15,stamina:500,score:0,remember:5,predict:2,luck:5,safeRadius:10,streak:1};if(Game.isMobile){Player.setup.staminaWidth/=Game.ratio;Player.font=Hud.mobile.font}else{Player.font=Player.setup.font}};Player.set=function(key,value){if(Player.stats.hasOwnProperty(key)){Player.stats[key]=value}else{console.log('Player stat "'+key+'" does not exists')}};Player.get=function(key){console.log('Player stat "'+key+'" does not exists');return Player.stats[key]||null};Player.increaseScore=function(points){var points=points||10;var score=Math.ceil(Player.game.stamina*Player.game.streak);Player.game.score+=score-score%points;if(Player.game.streak===Game.setup.count){Player.game.score*=2}Hud.score.text=Player.game.score.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};Player.restoreStamina=function(){Player.game.stamina=Player.stats.stamina;if(typeof Hud.staminaBar==="undefined"){Hud.staminaBar=new PIXI.Graphics}Hud.staminaBar.clear();Hud.staminaBar.beginFill(3472946);Hud.staminaBar.drawRect(Player.setup.margin,60,Player.setup.staminaWidth,20);Hud.staminaBar.endFill()};Player.reduceStamina=function(length){Player.game.stamina-=Math.sqrt(length)/1e3;var width=Player.game.stamina/Player.stats.stamina*Player.setup.staminaWidth;Hud.staminaBar.clear();Hud.staminaBar.beginFill(3472946);Hud.staminaBar.drawRect(Player.setup.margin,60,width,20);Hud.staminaBar.endFill()};Player.view={lives:function(){var margin=Player.setup.margin;var label=Locale.build("player_stats.lives",Player.font);Hud.livesCounter=new PIXI.Text(Player.stats.lives,Player.font);Hud.livesCounter.position.set(label.position.x+label.width+margin,0);var container=new PIXI.Container;container.position.set(margin,margin);container.addChild(label);container.addChild(Hud.livesCounter);container.scale.set(Game.ratio);return container},stamina:function(){var margin=Player.setup.margin;var x=margin;var label=Locale.build("player_stats.stamina",Player.font);label.position.set(x,40);var mask=new PIXI.Graphics;Player.setup.staminaWidth-=margin*2;mask.lineStyle(3,3452466,1);mask.drawRoundedRect(x,70,Player.setup.staminaWidth,20,5);Hud.staminaBar=new PIXI.Graphics;Hud.staminaBar.beginFill(3472946);Hud.staminaBar.drawRoundedRect(x,70,Player.setup.staminaWidth,20,6);Hud.staminaBar.endFill();var bar=new PIXI.Container;bar.addChild(label);bar.addChild(Hud.staminaBar);bar.addChild(mask);bar.scale.set(Game.ratio);return bar},score:function(){var margin=Player.setup.margin;var label=Locale.build("player_stats.score",Player.font);label.position.set(margin,90);Hud.score=new PIXI.Text(Player.game.score,Player.font);Hud.score.position.set(label.width+margin*1.4,90);var bar=new PIXI.Container;bar.addChild(label);bar.addChild(Hud.score);bar.scale.set(Game.ratio);return bar},remember:function(){},predict:function(){}};var Hud=new PIXI.Container;Hud.render=function(){};Hud.setup={margin:10,width:0,height:0,x:0,y:0,staminaWidth:130,font:{font:"18px Arial",fill:16750865}};Hud.mobile={font:{font:12*Game.ratio+"px Arial",fill:16750865,letterSpacing:2}};Hud.analog={};Hud.init=function(isLandscape){var x,y,width,height;this.interactive=true;x=Game.setup.worldWidth;y=0;width=CANVAS_WIDTH-x;height=CANVAS_HEIGHT;Hud.position.set(Game.setup.worldWidth,y);var hud=new PIXI.Graphics;hud.lineStyle(2*Game.ratio,16746513,1);hud.drawRect(0,0,width,height);Hud.addChild(hud);Hud.setup.staminaWidth=width-Hud.setup.margin*2;Player.init(Hud.setup);console.log(width,Hud.setup.staminaWidth);Game.pointer=new Pointer;Game.pointer.init(Game.setup);Hud.analog=new Analog;Hud.addChild(Hud.analog.getCircle());Hud.addChild(Hud.analog.getControler());Hud.addChild(Player.view.lives());Hud.addChild(Player.view.stamina());Hud.addChild(Player.view.score());Hud.addChild(Hud.returnButton())};Hud.returnButton=function(){var container=new PIXI.Container;container.position.set(35,120*Game.ratio);container.addChild(Menu.homeButton({w:90,h:30}));container.scale.set(Game.ratio);return container};Hud.row=function(){var row=new PIXI.Graphics};Hud.column=function(width){};
